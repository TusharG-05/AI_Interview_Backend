{"openapi":"3.1.0","info":{"title":"AI Interview Platform API","description":"High-performance JSON API for AI-driven face/gaze detection and automated interviews.","version":"2.0.0"},"paths":{"/api/video/video_feed":{"get":{"tags":["Video"],"summary":"Video Feed","description":"Streams the annotated video feed to the browser (Admin Side).","operationId":"video_feed_api_video_video_feed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/status/":{"get":{"tags":["System"],"summary":"Get System Status","description":"Comprehensive health check for AI services and Hardware.","operationId":"get_system_status_api_status__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/questions":{"get":{"tags":["Admin"],"summary":"Get Questions","description":"List all available interview questions.","operationId":"get_questions_api_admin_questions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Question"},"type":"array","title":"Response Get Questions Api Admin Questions Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Admin"],"summary":"Add Question","description":"API for manually adding a new interview question.","operationId":"add_question_api_admin_questions_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuestionCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Question"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/upload-doc":{"post":{"tags":["Admin"],"summary":"Upload Document","description":"Extract Q&A pairs from an uploaded document (Resume/Job Desc).","operationId":"upload_document_api_admin_upload_doc_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_api_admin_upload_doc_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/questions/{q_id}":{"delete":{"tags":["Admin"],"summary":"Delete Question","operationId":"delete_question_api_admin_questions__q_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"q_id","in":"path","required":true,"schema":{"type":"integer","title":"Q Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/rooms":{"get":{"tags":["Admin"],"summary":"List Rooms","operationId":"list_rooms_api_admin_rooms_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RoomRead"},"type":"array","title":"Response List Rooms Api Admin Rooms Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Admin"],"summary":"Create Room","operationId":"create_room_api_admin_rooms_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/interview/generate-link":{"post":{"tags":["Admin"],"summary":"Generate Interview Link","description":"Gereate a join URL and credentials for an interview room.","operationId":"generate_interview_link_api_admin_interview_generate_link_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"room_id","in":"query","required":true,"schema":{"type":"integer","title":"Room Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InterviewLinkResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/users/results":{"get":{"tags":["Admin"],"summary":"Get All Results","description":"API for the admin dashboard: Returns all candidate details and their interview results/audit logs.","operationId":"get_all_results_api_admin_users_results_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DetailedResult"},"type":"array","title":"Response Get All Results Api Admin Users Results Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/upload-identity":{"post":{"tags":["Admin"],"summary":"Upload Identity","operationId":"upload_identity_api_admin_upload_identity_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_identity_api_admin_upload_identity_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/users":{"get":{"tags":["Admin"],"summary":"List Users","operationId":"list_users_api_admin_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/UserRead"},"type":"array","title":"Response List Users Api Admin Users Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/shutdown":{"post":{"tags":["Admin"],"summary":"Shutdown","operationId":"shutdown_api_admin_shutdown_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/interview/general-questions":{"get":{"tags":["Interview"],"summary":"Get General Questions","operationId":"get_general_questions_api_interview_general_questions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/interview/start":{"post":{"tags":["Interview"],"summary":"Start Interview","operationId":"start_interview_api_interview_start_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_start_interview_api_interview_start_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/next-question/{session_id}":{"get":{"tags":["Interview"],"summary":"Get Next Question","operationId":"get_next_question_api_interview_next_question__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/audio/question/{q_id}":{"get":{"tags":["Interview"],"summary":"Stream Question Audio","operationId":"stream_question_audio_api_interview_audio_question__q_id__get","parameters":[{"name":"q_id","in":"path","required":true,"schema":{"type":"integer","title":"Q Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/submit-answer":{"post":{"tags":["Interview"],"summary":"Submit Answer","operationId":"submit_answer_api_interview_submit_answer_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_submit_answer_api_interview_submit_answer_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/finish/{session_id}":{"post":{"tags":["Interview"],"summary":"Finish Interview","operationId":"finish_interview_api_interview_finish__session_id__post","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"integer","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/evaluate-answer":{"post":{"tags":["Interview"],"summary":"Evaluate Answer","operationId":"evaluate_answer_api_interview_evaluate_answer_post","parameters":[{"name":"session_id","in":"query","required":true,"schema":{"type":"integer","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnswerRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/generate-resume-question":{"post":{"tags":["Interview"],"summary":"Generate Resume Question","operationId":"generate_resume_question_api_interview_generate_resume_question_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_generate_resume_question_api_interview_generate_resume_question_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/process-resume":{"post":{"tags":["Interview"],"summary":"Process Resume","operationId":"process_resume_api_interview_process_resume_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_process_resume_api_interview_process_resume_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/tts":{"post":{"tags":["Interview"],"summary":"Standalone Tts","operationId":"standalone_tts_api_interview_tts_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TTSRange"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/interview/evaluate":{"post":{"tags":["Interview"],"summary":"Standalone Evaluate","operationId":"standalone_evaluate_api_interview_evaluate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"JSON-based login. Sets secure HttpOnly cookie and returns token.","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout","description":"Clears the authentication cookie.","operationId":"logout_api_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/register":{"post":{"tags":["Authentication"],"summary":"Register","description":"Pure API registration. Sets secure HttpOnly cookie and returns token.","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/candidate/join":{"post":{"tags":["Candidate"],"summary":"Join Room","operationId":"join_room_api_candidate_join_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinRoomRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinRoomResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/candidate/history":{"get":{"tags":["Candidate"],"summary":"My History","operationId":"my_history_api_candidate_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/HistoryItem"},"type":"array","title":"Response My History Api Candidate History Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"AnswerRequest":{"properties":{"question":{"type":"string","title":"Question"},"answer":{"type":"string","title":"Answer"}},"type":"object","required":["question","answer"],"title":"AnswerRequest"},"Body_generate_resume_question_api_interview_generate_resume_question_post":{"properties":{"context":{"type":"string","title":"Context"},"resume_text":{"type":"string","title":"Resume Text"}},"type":"object","required":["context","resume_text"],"title":"Body_generate_resume_question_api_interview_generate_resume_question_post"},"Body_process_resume_api_interview_process_resume_post":{"properties":{"resume":{"type":"string","format":"binary","title":"Resume"}},"type":"object","required":["resume"],"title":"Body_process_resume_api_interview_process_resume_post"},"Body_start_interview_api_interview_start_post":{"properties":{"candidate_name":{"type":"string","title":"Candidate Name","default":"Candidate"},"enrollment_audio":{"type":"string","format":"binary","title":"Enrollment Audio"}},"type":"object","title":"Body_start_interview_api_interview_start_post"},"Body_submit_answer_api_interview_submit_answer_post":{"properties":{"session_id":{"type":"integer","title":"Session Id"},"question_id":{"type":"integer","title":"Question Id"},"audio":{"type":"string","format":"binary","title":"Audio"}},"type":"object","required":["session_id","question_id","audio"],"title":"Body_submit_answer_api_interview_submit_answer_post"},"Body_upload_document_api_admin_upload_doc_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_document_api_admin_upload_doc_post"},"Body_upload_identity_api_admin_upload_identity_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_identity_api_admin_upload_identity_post"},"DetailedResult":{"properties":{"session_id":{"type":"integer","title":"Session Id"},"candidate":{"type":"string","title":"Candidate"},"date":{"type":"string","title":"Date"},"score":{"type":"string","title":"Score"},"flags":{"type":"boolean","title":"Flags"},"details":{"items":{"$ref":"#/components/schemas/ResponseDetail"},"type":"array","title":"Details"},"proctoring_logs":{"items":{"$ref":"#/components/schemas/ProctoringLogItem"},"type":"array","title":"Proctoring Logs"}},"type":"object","required":["session_id","candidate","date","score","flags","details","proctoring_logs"],"title":"DetailedResult"},"EvaluateRequest":{"properties":{"candidate_text":{"type":"string","title":"Candidate Text"},"reference_text":{"type":"string","title":"Reference Text"}},"type":"object","required":["candidate_text","reference_text"],"title":"EvaluateRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryItem":{"properties":{"session_id":{"type":"integer","title":"Session Id"},"room_code":{"type":"string","title":"Room Code"},"date":{"type":"string","title":"Date"},"score":{"type":"number","title":"Score"}},"type":"object","required":["session_id","room_code","date"],"title":"HistoryItem"},"InterviewLinkResponse":{"properties":{"url":{"type":"string","title":"Url"},"room_code":{"type":"string","title":"Room Code"},"password":{"type":"string","title":"Password"}},"type":"object","required":["url","room_code","password"],"title":"InterviewLinkResponse"},"JoinRoomRequest":{"properties":{"room_code":{"type":"string","title":"Room Code"},"password":{"type":"string","title":"Password"}},"type":"object","required":["room_code","password"],"title":"JoinRoomRequest"},"JoinRoomResponse":{"properties":{"session_id":{"type":"integer","title":"Session Id"},"room_code":{"type":"string","title":"Room Code"},"message":{"type":"string","title":"Message"}},"type":"object","required":["session_id","room_code","message"],"title":"JoinRoomResponse"},"LoginRequest":{"properties":{"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"ProctoringLogItem":{"properties":{"type":{"type":"string","title":"Type"},"time":{"type":"string","title":"Time"},"details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Details"}},"type":"object","required":["type","time"],"title":"ProctoringLogItem"},"Question":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Id"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"question_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Question Text"},"topic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Topic"},"difficulty":{"type":"string","title":"Difficulty","default":"Medium"},"reference_answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reference Answer"}},"type":"object","title":"Question"},"QuestionCreate":{"properties":{"content":{"type":"string","title":"Content"},"topic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Topic","default":"General"},"difficulty":{"type":"string","title":"Difficulty","default":"Medium"},"reference_answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reference Answer"}},"type":"object","required":["content"],"title":"QuestionCreate"},"ResponseDetail":{"properties":{"question":{"type":"string","title":"Question"},"answer":{"type":"string","title":"Answer"},"score":{"type":"string","title":"Score"}},"type":"object","required":["question","answer","score"],"title":"ResponseDetail"},"RoomCreate":{"properties":{"password":{"type":"string","title":"Password"},"max_sessions":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Sessions","default":30}},"type":"object","required":["password"],"title":"RoomCreate"},"RoomRead":{"properties":{"id":{"type":"integer","title":"Id"},"room_code":{"type":"string","title":"Room Code"},"password":{"type":"string","title":"Password"},"is_active":{"type":"boolean","title":"Is Active"},"max_sessions":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Sessions"},"active_sessions_count":{"type":"integer","title":"Active Sessions Count","default":0}},"type":"object","required":["id","room_code","password","is_active","max_sessions"],"title":"RoomRead"},"TTSRange":{"properties":{"text":{"type":"string","title":"Text"}},"type":"object","required":["text"],"title":"TTSRange"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"role":{"type":"string","title":"Role"},"email":{"type":"string","title":"Email"},"full_name":{"type":"string","title":"Full Name"},"expires_at":{"type":"string","title":"Expires At"}},"type":"object","required":["access_token","token_type","role","email","full_name","expires_at"],"title":"Token"},"UserCreate":{"properties":{"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"},"full_name":{"type":"string","title":"Full Name"},"role":{"$ref":"#/components/schemas/UserRole","default":"candidate"}},"type":"object","required":["email","password","full_name"],"title":"UserCreate"},"UserRead":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","title":"Email"},"full_name":{"type":"string","title":"Full Name"},"role":{"type":"string","title":"Role"}},"type":"object","required":["id","email","full_name","role"],"title":"UserRead"},"UserRole":{"type":"string","enum":["admin","super_admin","candidate"],"title":"UserRole"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/login"}}}}}}