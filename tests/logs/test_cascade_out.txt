============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Sameer\OneDrive\Desktop\AI_Interview_Backend\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Sameer\OneDrive\Desktop\AI_Interview_Backend
configfile: pytest.ini
plugins: anyio-4.12.1, langsmith-0.6.6, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 6 items

tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_clean_user PASSED [ 16%]
tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_user_with_interviews PASSED [ 33%]
tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_nonexistent_user PASSED [ 50%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_candidate_cascades_interviews FAILED [ 66%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_clean_user PASSED [ 83%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_cannot_delete_self FAILED [100%]

================================== FAILURES ===================================
_________ TestCascadeDelete.test_delete_candidate_cascades_interviews _________
tests\unit\test_cascade_delete.py:136: in test_delete_candidate_cascades_interviews
    assert remaining is None
E   AssertionError: assert InterviewSession(max_warnings=3, max_questions=None, access_token='03a53ed43e074407b1b2381371a38f9e', start_time=None, id=1, is_suspended=False, end_time=None, suspension_reason=None, admin_id=1, status=<InterviewStatus.SCHEDULED: 'scheduled'>, suspended_at=None, candidate_id=2, total_score=None, enrollment_audio_path=None, invite_link=None, paper_id=1, current_status=None, is_completed=False, schedule_time=datetime.datetime(2026, 2, 26, 5, 26, 10, 933427), last_activity=None, warning_count=0, duration_minutes=60) is None
__________________ TestCascadeDelete.test_cannot_delete_self __________________
tests\unit\test_cascade_delete.py:154: in test_cannot_delete_self
    assert "Cannot delete your own account" in response.json()["detail"]
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'detail'
=========================== short test summary info ===========================
FAILED tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_candidate_cascades_interviews
FAILED tests/unit/test_cascade_delete.py::TestCascadeDelete::test_cannot_delete_self
========================= 2 failed, 4 passed in 2.27s =========================
