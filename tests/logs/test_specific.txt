============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Sameer\OneDrive\Desktop\AI_Interview_Backend\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Sameer\OneDrive\Desktop\AI_Interview_Backend
configfile: pytest.ini
plugins: anyio-4.12.1, langsmith-0.6.6, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 11 items

tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_clean_user PASSED [  9%]
tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_user_with_interviews PASSED [ 18%]
tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_nonexistent_user PASSED [ 27%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_candidate_cascades_interviews FAILED [ 36%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_clean_user PASSED [ 45%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_cannot_delete_self FAILED [ 54%]
tests/unit/test_total_score.py::TestTotalScoreInResultDetail::test_total_score_returned_correctly PASSED [ 63%]
tests/unit/test_total_score.py::TestTotalScoreInResultDetail::test_total_score_none_when_not_processed PASSED [ 72%]
tests/unit/test_total_score.py::TestTotalScoreInResultDetail::test_total_score_in_nested_interview_object PASSED [ 81%]
tests/unit/test_total_score.py::TestTotalScoreInResultBrief::test_total_score_in_brief_list PASSED [ 90%]
tests/unit/test_total_score.py::TestTotalScoreInResultBrief::test_zero_score_not_filtered_out PASSED [100%]

================================== FAILURES ===================================
_________ TestCascadeDelete.test_delete_candidate_cascades_interviews _________
tests\unit\test_cascade_delete.py:136: in test_delete_candidate_cascades_interviews
    assert remaining is None
E   AssertionError: assert InterviewSession(suspended_at=None, candidate_id=2, status=<InterviewStatus.SCHEDULED: 'scheduled'>, enrollment_audio_path=None, invite_link=None, total_score=None, is_completed=False, current_status=None, paper_id=1, last_activity=None, schedule_time=datetime.datetime(2026, 2, 26, 5, 25, 0, 649805), duration_minutes=60, warning_count=0, access_token='1f997b601d8b4c0fb2f0be01027e17b0', max_warnings=3, max_questions=None, start_time=None, is_suspended=False, id=1, end_time=None, admin_id=1, suspension_reason=None) is None
__________________ TestCascadeDelete.test_cannot_delete_self __________________
tests\unit\test_cascade_delete.py:154: in test_cannot_delete_self
    assert "Cannot delete your own account" in response.json()["detail"]
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'detail'
=========================== short test summary info ===========================
FAILED tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_candidate_cascades_interviews
FAILED tests/unit/test_cascade_delete.py::TestCascadeDelete::test_cannot_delete_self
========================= 2 failed, 9 passed in 2.38s =========================
