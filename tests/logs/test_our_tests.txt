============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\Sameer\OneDrive\Desktop\AI_Interview_Backend\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\Sameer\OneDrive\Desktop\AI_Interview_Backend
configfile: pytest.ini
plugins: anyio-4.12.1, langsmith-0.6.6, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 18 items

tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_clean_user PASSED [  5%]
tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_user_with_interviews PASSED [ 11%]
tests/unit/test_cascade_delete.py::TestCheckDeleteEndpoint::test_check_delete_nonexistent_user PASSED [ 16%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_candidate_cascades_interviews FAILED [ 22%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_clean_user PASSED [ 27%]
tests/unit/test_cascade_delete.py::TestCascadeDelete::test_cannot_delete_self FAILED [ 33%]
tests/unit/test_total_score.py::TestTotalScoreInResultDetail::test_total_score_returned_correctly PASSED [ 38%]
tests/unit/test_total_score.py::TestTotalScoreInResultDetail::test_total_score_none_when_not_processed PASSED [ 44%]
tests/unit/test_total_score.py::TestTotalScoreInResultDetail::test_total_score_in_nested_interview_object PASSED [ 50%]
tests/unit/test_total_score.py::TestTotalScoreInResultBrief::test_total_score_in_brief_list PASSED [ 55%]
tests/unit/test_total_score.py::TestTotalScoreInResultBrief::test_zero_score_not_filtered_out PASSED [ 61%]
tests/unit/test_interview.py::test_create_interview_session PASSED       [ 66%]
tests/unit/test_interview.py::test_access_interview_invalid_token PASSED [ 72%]
tests/unit/test_interview.py::test_access_interview_valid PASSED         [ 77%]
tests/unit/test_interview.py::test_start_session PASSED                  [ 83%]
tests/unit/test_interview.py::test_submit_answer_text PASSED             [ 88%]
tests/unit/test_interview.py::test_evaluate_answer_modal_fallback PASSED [ 94%]
tests/integration/test_flow.py::test_full_interview_lifecycle PASSED     [100%]

================================== FAILURES ===================================
_________ TestCascadeDelete.test_delete_candidate_cascades_interviews _________
tests\unit\test_cascade_delete.py:136: in test_delete_candidate_cascades_interviews
    assert remaining is None
E   AssertionError: assert InterviewSession(id=1, is_suspended=False, start_time=None, end_time=None, suspension_reason=None, admin_id=1, suspended_at=None, status=<InterviewStatus.SCHEDULED: 'scheduled'>, candidate_id=2, invite_link=None, total_score=None, enrollment_audio_path=None, is_completed=False, current_status=None, paper_id=1, last_activity=None, schedule_time=datetime.datetime(2026, 2, 26, 5, 27, 40, 290628), warning_count=0, duration_minutes=60, max_questions=None, max_warnings=3, access_token='69cb3c8140344ae89a8c8154b08456ff') is None
__________________ TestCascadeDelete.test_cannot_delete_self __________________
tests\unit\test_cascade_delete.py:154: in test_cannot_delete_self
    assert "Cannot delete your own account" in response.json()["detail"]
                                               ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'detail'
=========================== short test summary info ===========================
FAILED tests/unit/test_cascade_delete.py::TestCascadeDelete::test_delete_candidate_cascades_interviews
FAILED tests/unit/test_cascade_delete.py::TestCascadeDelete::test_cannot_delete_self
======================== 2 failed, 16 passed in 2.83s =========================
